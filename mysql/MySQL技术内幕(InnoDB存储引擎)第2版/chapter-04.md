# 第四章 表

- 索引组织表
- _rowid 主键列
- 表空间
- 段
- 区大小 1m （由一系列的页组成）
- 页大小 16k

## _rowid

另外需要注意的是，_rowid 只能用于查看单个列为主键的情况，对于多列组成的主键就显得无能为力了。

## InnoDB逻辑存储结构

![mysql-innodb-chapter-04-01.drawio.svg](./images/mysql-innodb-chapter-04-01.drawio.svg)

## 表空间

表空间可以看做是InnoDB存储引擎逻辑结构的最高层，所有的数据都存放在表空间中。第3章中已经介绍了在默认情况下InnoDB存储引擎有一个共享表空间ibdata1,
即所有数据都存放在这个表空间内。如果用户启用了参数innodb_file_per_table, 则每张表内的数据可以单独放到一个表空间内。
如果启用了innodb_file_per_table 的参数，需要注意的是每张表的表空间内存放的只是数据、索引和插人缓冲Bitmap页，其他类的数据，如回滚(undo) 信息，插入缓冲
索引页、系统事务信息，二次写缓冲(Double write buffer)等还是存放在原来的共享表空间内。这同时也说明了另一个问题:即使在启用了参数innodb_file_per_table之后，共
享表空间还是会不断地增加其大小。

## 段

图4-1中显示了表空间是由各个段组成的，常见的段有数据段、索引段、回滚段等。因为前面已经介绍过了`InnoDB`存储引擎表是索引组织的(index organized)，因此数据
即索引，索引即数据。那么数据段即为B+树的叶子节点(图4-1的Leaf node segment),索引段即为B+树的非索引节点(图4-1的Non-leaf node segment)。回滚段较为特殊，将会在后面的章节进行单独的介绍。

## 区

区是由连续页组成的空间，在任何情况下每个区的大小都为1MB.为了保证区中页的连续性，InnoDB 存储引擎一次从磁盘申请4 ~ 5个区。在默认情况下，InnoDB存储引擎页的大小为16KB，即一个区中-共有64个连续的页。